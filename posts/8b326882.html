<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>常见前端面试题详解 | 月晕</title><meta name="keywords" content="面试题,前端,JavaScript,面试题详解"><meta name="author" content="月晕"><meta name="copyright" content="月晕"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="常见前端面试题详解"><meta name="application-name" content="常见前端面试题详解"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="常见前端面试题详解"><meta property="og:url" content="https://blog.yueyun.site/posts/8b326882.html"><meta property="og:site_name" content="月晕"><meta property="og:description" content="常见前端面试题详解和答案"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702557879900.png"><meta property="article:author" content="月晕"><meta property="article:tag" content="JS,前端,前端开发,TS,TypeScript,Node,Node.js,Nodejs,Node,后端"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702557879900.png"><meta name="description" content="常见前端面试题详解和答案"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.yueyun.site/posts/8b326882"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><meta name="google-site-verification" content="QmqYgcPLCjEZmEbdJVKduTaxnvd3OFJRyp3BLB2f0VQ"><meta name="baidu-site-verification" content="codeva-XPqAkKFOID"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script async src="https://www.googletagmanager.com/gtag/js?id=G-W3DLGJMJDY"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W3DLGJMJDY")</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"T^T","backTitle":"Ciallo~"},
  LA51: {"enable":true,"ck":"3GbfdCFGvNdWoQg1","LingQueMonitorID":"3GbfdCFGvNdWoQg1"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://chat.yueyun.site',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🖥️ JavaScript爱好者","🔍 前沿技术追随者","🩵 吃饭睡觉看动漫","🔨 前端后端一把梭","🤓 玉玉郁郁第一名","🧟 间歇性发奋图强","😵 持续性混吃等死","🥰 欢迎找我来聊天"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 月晕","link":"链接: ","source":"来源: 月晕","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"月晕",title:"常见前端面试题详解",postAI:"",pageFillDescription:"new 操作符, 为什么要使用虚拟 DOM 虚拟 DOM 的性能一定比真实 DOM 差吗？, SPA 和 MPA, React Fiber 架构, Fiber 是什么, Fiber 的作用, Fiber 理论实现, FiberNode 的结构, Fiber 是如何工作的, 设计模式, 单例模式(Singleton), 工厂模式(Factory), 观察者模式(Observer), 装饰器模式(Decorator), 策略模式(Strategy), 适配器模式(Adapter), 渲染是十万条数据解决方案, 为什么 Hooks 不能存在条件判断中, 事件循环机制(浏览器 和 nodejs 环境), JSONP 原理以及实现, 什么是简单方法什么是复杂方法, 表格中的form-data和json的异同, Cookie的配置, JavaScript 中的垃圾回收机制, ESmodule 和 CommonJS 的差别, ES6 的新增语法, 原型和原型链, 事件的冒泡和委托, 浏览器的 Debug, Promise 链中的 catch 和 try catch 的区别, 计算机网络, 常见状态码, HTTP 中常见字段, GET 和 POST, HTTP 缓存技术, 强制缓存(权重高), 协商缓存, HTTP 特性, HTTP, HTTPx2F1.1 性能, HTTPS, HTTPx2F2, HTTPx2F3, HTTP 优化, RPC, WebSocket, 浏览器中怎么建立的x连接, WebSocket使用场景, TCP, TCP 的基本格式, TCP 特点, TCP 连接, TCP 建立连接过程, 为什么需要三次握手, TCP 断开连接的过程, 为什么需要四次挥手, TCP 功能, IP 层, IP地址分类, 无分类地址 CIDR, IP地址和路由控制, 从输入网址到页面显示发生了那些过程, , 为什么 0.1 + 0.2  !== 0.3, 浮点数在内存中是怎么存储的操作符中的操作符是对一个构造函数创建实例的过程如通过构造器创建的实例能访问构造函数中的属性可以访问到构造属性原型链的属性创建一个新的对象新对象的原型指向原型链绑定为什么要使用虚拟虚拟的性能一定比真实差吗虚拟比上真实有如下几点原因性能优化真实的操作是昂贵的性能消耗较大每次更改页面上的某个小部分时浏览器可能需要重新计算布局并重新绘制整个页面虚拟允许框架在中构建一个轻量级的树副本配合使用算法计算出渲染为真实的最小代价操作再渲染为真实利用运算成本来换取执行成本的操作而的运算速度快很多引擎引擎相互独立但又工作在同一线程主线程代码调用必须挂起引擎转换传入参数数据激活引擎重绘后再转换可能有的返回值最后激活引擎并继续执行若有频繁的调用且浏览器厂商不做批量处理优化引擎间切换的单位代价将迅速积累若其中有强制重绘的调用重新计算布局重新绘制图像会引起更大的性能消耗虚拟不会立马进行排版与重绘操作虚拟进行频繁修改然后一次性比较并修改真实中需要改的部分最后在真实中进行排版与重绘减少过多节点排版与重绘损耗虚拟有效降低大面积真实的重绘与排版因为最终与真实比较差异可以只渲染局部声明式编程使用虚拟允许开发者通过声明式编程更加直观和简洁地描述界面应该呈现的样子开发者只需关心数据的状态界面应该如何根据这些状态变化而变化而不是如何操作来实现这些变化跨平台虚拟作为一个简单的对象模型可以使得同一个应用能够运行在不同的环境中例如在浏览器服务器甚至原生移动应用中如这种跨平台的能力是因为虚拟提供了一个与具体平台无关的中间层和即是意思是单页应用网页应用模型就是一张页面单页面跳转仅刷新局部资源公共资源仅需要加载一次即是使用去感知的变化去做动态改变好处即是性能更快页面跳转时不用处理节约了请求花费用户体验好快良好的前后端分离传递数据方便一般是高度交互的应用使用比较多缺点即使不友好内容通过动态加载多页面应用在用户浏览不同的页面时服务器将为每个请求返回新的页面这意味着每次用户请求新页面或刷新现有页面时整个页面都会被重新加载适合内容丰富的网站如新闻网站电商平台等它们可以从每个页面的独立中获益路由的和两种模式模式主要是通过中的哈希值变化来控制页面的显示兼容性好可以在不支持的老旧浏览器中使用而模式则是利用的来实现的变化看起来更美观没有符号用户体验更接近传统的多页面应用模式存放以及对应的回调模式模式借用提供了丰富的相关属性先了解一个几个相关的浏览器历史纪录添加记录修改浏览器历史纪录中当前纪录当发生变化时触发存放以及对应的如何给做优化服务端渲染比如等静态化静态站点生成一种是通过程序将动态页面抓取并保存为静态页面通过服务器的的方式它的原理是通过服务器内部模块按一定规则将外部的请求转化为内部的文件地址一句话来说就是把外部请求的静态地址转化为实际的动态页面地址而静态页面实际是不存在的架构是什么是中新的协调引擎主要目的是使可以进行增量式的渲染的基于节点实现即是作为静态的数据结构来说每个节点对应一个保存了该组件类型函数组件类组件原生组件对应的节点信息作为动态的工作单位每个节点保存了本次更新的组件变更状态要执行的操作状态删除插入更新无论是作为数据结构还是工作单位都是使用的身份存在即在架构中命令为协调器就是的作用为了解决在组件中更新时产生的卡顿现象构建出了架构并在中发布将同步递归无法终中断的更新重构为异步的可中断更新把可中断的任务拆分成小任务对正在做的任务调整优先次序重做复用等在父子任务间切换支持执行过程中的布局刷新支持返回多个元素中的架构调度器一个渲染工作分解成多个小任务并在多个帧之间分配和执行这些任务协调器则从递归变成了可以中断的循环过程每次循环都会调用判断当前是否有剩余时间渲染器将打上标签的虚拟对象即执行成变视图理论实现优先级分配异步可中断的结构作为静态数据结构的属性用于连接其他形成作为动态的工作单元的属性调度优先级相关指向该在另一次更新时对应的是如何工作的和的时候开始创建更新调度器设置优先级并将创建的更新加入任务队列等待调度在空闲时执行任务从根节点开始遍历并且构建协调器阶段生成对其打标签进行对比渲染器根据更新设计模式单例模式确保一个类只有一个实例并提供全局访问点来获取该实例保存单例实例的私有静态属性构造函数私有化防止外部实例化初始化代码获取单例实例的静态方法如果实例不存在创建一个新的实例返回唯一的实例示例方法使用单例验证两个实例是否相同调用示例方法工厂模式通过工厂方法创建对象而不是直接使用操作符这样可以隐藏具体实现并根据需要创建所需类型的对象假设我们现在有一个产品接口和两个具体的产品类我们将使用一个工厂类来创建这些产品的实例创建产品的实例输出创建产品的实例输出观察者模式定义了一种对一对多的依赖关系当一个对象状态发生改变时他的所有依赖者观察者都会收到通知并自动更新观察目标观察者装饰器模式动态地将责任附加到对象上通过将对象包装在装饰器对象中可以在运行时为对象添加新的行为对已有的功能进行拓展这样不会更改原有的代码对其他的业务产生影响这方便我们在较少的改动下对软件功能进行拓展比如现在给上传数据加上一个操作打印上传前的日志上传数据定义装饰器使用发起请求装饰器处理器示例控制器使用控制器策略模式定义了一系列算法将每个算法封装起来并使它们可以相互替换策略模式可以让算法独立于客户端而变化比如创建一个简单的支付系统有不同的支付策略策略接口具体策略信用卡支付具体策略支付上下文类适配器模式将一个类的接口转换成客户端所期望的另一个接口适配器模式使得原本由于接口不匹配而无法一起工作的类可以协同工作腾讯地图渲染百度地图渲染渲染是十万条数据解决方案虚拟列表按需渲染可视区域渲染虚拟列表是按需显示的一种实现即只对可见区域进行渲染对非可见区域的数据不渲染或部分渲染的技术通过监听来判断是上滑还是下拉从而更新数据同理和实现延迟渲染即懒渲染最开始不渲染所有数据只渲染可视区域中的数据同虚拟列表一致当滚动到页面底部时添加数据视图渲染新增时间分片分批渲染使用来让动画更加流畅在浏览器渲染的每一帧的空闲时间去渲染数据为什么不能存在条件判断中在中是基于顺序调用的意味着在的调用顺序必须保持稳定不能在渲染的过程中发生改变这样会导致顺序发生变化违反了设计规则在重新的时候会根据的调用顺序来确定每个的对应状态如果放入条件语句中会导致组件的状态混乱不可测在的源码中的状态是与组件实例相关联每次组件重新渲染时会使用相同的顺序来调用这样才能确保正确的管理组件状态的实现是基于链表结构当组件函数被调用的时候会根据的调用顺序创建一个链表并将这个链表与实例相关联而这个存在一个对象里面存在一些属性事件循环机制浏览器和环境原理以及实现什么是简单方法什么是复杂方法表格中的和的异同的配置中的垃圾回收机制和的差别的新增语法原型和原型链事件的冒泡和委托浏览器的链中的和的区别计算机网络网络模型一种通用的网络协议应用层传输层网络层网络应用层物理链路层常见状态码属于提示信息是协议处理中的中间状态用到的少表示服务器成功的处理了客户端的请求预期情况最常见的成功状态码表示一切正常如果是非请求服务器返回的响应头都会有数据表示成功状态码与相同但是没有数据应用于分块下载或者是断点续传表示响应返回的数据并不是资源的全部而是其中的一部分表示客户端的请求资源发生了变动需要客户端用新的去重新发生请求获取资源即是重定向永久重定向说明请求的资源已经不存在了需要用新的去再次访问表示临时重定向说明请求的资源还在但暂时需要改用新的去访问不具有跳转的含义表示资源未修改去重定向已经缓存的文件也称缓存重定向用于缓存控制表示客户端发送的报文有误服务器无法处理表示客户端的请求报文有错误是一个笼统的错误处理表示服务器禁止访问资源而不是客户端错误表示请求的资源在服务器上不存在或未找到所以无法提供给客户端表示客户端请求报文正确但是服务器处理的时候内部发生了错误属于服务端的错误码与一样是一个笼统的错误码表示服务器发生了错误表示客户端的请求还不支付类似于即将开业的情况通常是服务器作为网关或者代理时返回的错误码服务器很忙暂时无法响应中常见字段字段客户端请求用来指定服务器的域名字段表面本次回应的数据长度可以解决中的粘包问题中的粘包问题产生我们不能认为一个用户消息对应一个报文因为在发送报文的过程的时候会经过自己内部的发送窗口拥塞控制和缓冲区大小等等共同解决的所以是面向字节流的协议解决粘包问题在中是有特殊字符作为边界空格换行回车和作为数据长度换行符做的边界作为的边界从而去解决这个问题字段常用于客户端要求服务器使用长连接机制以便其他请求去复用通道长连接的特点是只要任意一端没有明确的提出断开连接特会一直保持连接状态中的和中的中的用户态中的长链接避免建立连接和释放的开销也为流水线技术提供了可实现的基础客户端可以先一次性发送多个请求而在发送的过程中不需等待服务器的回应可以减少整体的响应时间但是此时服务器的响应还是要按照顺序这样就可能前一个请求太慢形成了阻塞也就是常说的队头阻塞问题为了资源浪费也会设置一个的字段去定时断开连接中的的保活机制如果两端一直没有数据交互则达到触发保活机制的条件在内核中的协议栈会发送探测报文去判断报告情况字段用于服务器返回的时候告诉客户端本次的数据格式客户端请求的时候可以加上表示自己应该接受什么类型响应体中可以规定浏览器的默认行为指向这次的媒体类型字段字段说明数据压缩的方式和请求中的可以接受对应和根据规范来说是指从服务器获取指定资源的请求参数是写在上的必须是浏览器会对的长度有限制是指根据请求的负荷对指定的资源做出处理可以是任意格式的幂等意思是执行多次结果是一样的安全请求方法不会破坏服务器上面的资源根据规范来看方法就是安全且幂等的是不安全且不幂等的但是实际开发的过程中和可以实现增删改服务器上面的资源也可以用来查询数据甚至可以带上也可以加上参数缓存技术对于一些重复性的请求比如每次请求到的数据是一样的可以把这样的请求响应的数据缓存在本地避免请求的方法就是使用缓存中的缓存分成强制缓存和协商缓存强制缓存权重高只要浏览器的缓存没过期则直接使用浏览器的本地缓存决定是否使用缓存的主动性在于浏览器强制缓存是利用到下面两个响应头部的字段信息去完成的都用来表示资源在客户端的缓存有效期相对时间也可以设置别的参数如权重高是一个相对时间流程浏览器第一次访问服务器资源的时候服务器会返回某个资源并且在上面设置对应的响应字段浏览器保存后在次请求的时候通过请求资源的时间与中设置的过期时间大小来计算出该资源是否过期如果没有则使用该缓存服务器在次收到请求后会重新更新头部的协商缓存请求响应码是服务端告知客户端是否可以使用缓存的方式叫协商缓存即通过协商缓存结果来判断是否可以使用本地缓存也可以基于两种形式去完成协商缓存的过程资源过期后发现中含有字段则在次发起请求的时候带上发送给服务器服务器去根据这项时间去跟对比返回资源过期后同比较是否相同一般是使用去给内容做一个唯一的值去比较权重高如果不存在则比较时间使用的好处监控的粒度更加深可以精确到毫秒内不会存在手动改写时间的情况协商缓存字段只有在设置了强制缓存字段后未命中强制缓存的时候才能发起带有协商缓存的字段请求特性简单基本报文格式就是头部信息也是简单文本形式易于理解灵活易于扩展中的各种请求方法状态码头字段等都没有被规定死允许开发人员自定义应用广泛和跨平台无状态服务器不会去记忆状态不需要额外的资源去使用减轻服务器的负担但是没有记忆性做到一些关联性操作会非常麻烦于是就引出了关于等技术明文传输不安全通信使用明文不验证通信的双方不能验证报文的完整性性能基于协议请求应答的模式即性能判断就在这两点上面长连接早期的是每发起一个请求都会建立连接断开连接消费资源比较大提出长连接没有一方会一直保持管道网络传输在同一个连接中客户端可以发起多个请求可以减少整体的响应时间但是服务器的响应必须按照请求的顺序这样就造成了队头阻塞的问题队头阻塞是明文传输存在窃听篡改冒充等风险在和之间增加了协议可以很好的解决上面的缺点信息加密混合加密的方式来实现信息的机密性比如算法校验机制摘要算法数字签名来实现完整性为数据生成独一无二的指纹身份证书将服务器公钥放入数字证书中解决冒充的风险协议是基于的相比较有如下的更新头部压缩中会压缩头如果同时发送的请求头是一样的协议栈会消除重复的部分算法去打表二进制格式采用二进制格式去实现头信息和数据体都是二进制统称为帧头信息帧和数据帧并发传输引入概念多个复用一条的连接针对不同的请求使用独一无二的来区分可以交错的发送和请求报文服务器主动推送资源服务端和客户端双方都可以建立使用数字的奇偶来区分缺点是基于协议来传输的数据是基于字节流必须保证接受到的字节流是完整且连续的这样才会从内核缓冲区中取数据去发送给应用当前一个字节没有发送的时候后面的数据只能放在缓冲区中等待第一个字节数据到达才会发送给应用中的管道虽然可以解决请求的问题但是没有解决响应的队头阻塞问题虽然通过多路复用解决了队头阻塞的问题但是一旦发现丢包则会阻塞所有的请求属于层的队头阻塞中的问题是导致的队头阻塞但是的特点就是基于字节流所以就是将传输换成了实现了基于的格式方法机制的协议在上面实现的伪的多路复用协议无队头阻塞协议也有类似的的机制保证传输的可靠性但是多个是没有依赖的相互独立当某个流丢包的时候只会阻塞这个流并不会影响到其他的流更快的建立连接因为内部包含因此仅需个就可以同时完成建立连接与密钥协商甚至在第二次连接的时候应用数据包可以和握手信息连接信息信息一起发送达到的效果连接迁移无感优化尽量避免发送请求通过缓存技术去完成缓存功能包括强制缓存和协商缓存等在需要发送请求的时候考虑如何减少次数减少重定向请求次数通过中间层服务器去完成这个定向请求的功能而不是去跟客户端交互合并请求比如通用的配置生成一个的大请求小的资源图去形成大的精灵图减少次数的请求延迟发送请求懒加载按需请求等减少服务器的响应的数据大小无损压缩和有损压缩本质上就是一种基于传输层的一种通信方式远程过程调用调用方式有很多封装好的协议比如等的是在应用层的一种协议一般是用来在集群内部的通信调用远端的方法可以屏蔽一些网络的细节与的区别服务发现中通过服务去解析背后的和端口一般会有中间服务去保存服务器名和信息等底层连接形式会在底层建立一个连接池在请求量大的时候建立多条连接放在池内传输内容定制程度高不用考虑浏览的行为效率性能高连接的两端是在同一时间双方都可以主动的想对方发送数据即是所谓的全双工然而是基于的同一段时间段内客户端和服务器只能有一方主动的发送消息即是半双工因为最开始的网页设计就是看文本等场景只需要请求应答的模式即可以但是现在场景越多需求越多这样基于的新应用层协议即出来了在早期做到服务器推送消息的时候不断轮询在前端代码中不断地定时发请求到服务器服务器收到请求后给客户端响应信息伪服务器的推送手段只是用户无感而已这种缺点也是非常的明显消耗带宽满屏的请求边缘等长轮询将请求的超时时间设置的很大在这段时间内服务器只要收到了请求的信息就立马返回给客户端如果超时则立马发起下一个请求浏览器中怎么建立的连接为了在浏览器中兼容协议浏览器在进行三次握手后都统一使用协议先进行一次通信如果是普通的请求则继续使用协议进行交互如果是想建立过程则会在中携带一些特殊的头信息如下所示头的意思是浏览器想升级协议并且想升级成同时随机携带一个随机生成的码作为发给服务器如果服务器支持连接协议就会去走的握手流程同时根据客户端生成的码根据公开的算法去生成对应的字符串返回同时变成状态码使用场景完成的实现了的全双工的能力并且也解决了粘包问题适用于服务端和客户端需要大量交互的场景查看默认打开的折叠框协议本身是全双工的但是协议设计的是半双工对大部分服务器要推送的场景使用更合适基于简单的场景的比如登录等场景可以使用长轮询或者定时轮询去实习服务器推送功能正因为各个浏览器都支持协议所以会先利用协议加上一些特殊的头进行握手升级操作升级成功后就跟没有任何关系了的基本格式序列号在建立连接计算机随机生成的随机数去做为初始值通过包发送给接收端的主机每次增加数据字节数去累加判断用来解决网络包乱序的问题确认应答号指下一次期望接受收到的数据序列号用来解决丢包的问题是一个工作在传输层的可靠数据传输的服务能确保接受端接受到的网络包是无损坏无间隔非冗余按序的特点是面向连接可靠的基于字节流的传输层通信协议面向连接一对一才能连接可靠的无论网络链路出现了什么样的变化都可以保证一个报文一定能到达接收端字节流用户消息通过协议传输时消息可能会被操作系统分组成多个报文通过消息边界来确定没接受到的等待重复的丢弃连接用于保证可靠状态和流量传输控制维护的某些状态信息这些信息包括序列号解决乱序问题窗口大小流量控制建立连接过程是面相连接的协议所以必须先建立连接连接是通过三次握手来进行的过程如下刚开始和端都处理状态主动监听端口变成状态客户端会初始化序列号将此序列号置于首部的序列号字段中同时把的字段设置成表示报文之后把这个报文发送给服务端表示发起连接请求该报文并不包含应用层数据发送后的客户端处于状态服务端收到客户端的后首先也直接初始化一个随机数字作为放入序列号字段中同时将确认答应号填成把和的值都变成发送回去同时也不包含任何的应用层数据客户端接受到了服务端数据后还要向服务端去发送一个确认消息确认应答号是将变成之后服务器处于状态这个时候可以携带应用层数据客户端处于状态为什么需要三次握手阻止重复历史连接的初始化在网络拥堵的情况下客户端可以确认自己希望收到的应答号去进行对比确认同步双方的初始序列号去除从重复数据根据数据包的序列号按需接受可以识别发送的数据包是否被接受避免浪费资源断开连接的过程的连接是通过四次挥手来完成客户端打算关闭连接此时会发送一个首部标志位被置位的报文即是报文之后客户端进入的状态服务端接受到报文信息后就向客户端发送应答报文同时自己的状态进入客户端接受到报文后进入的状态等地服务器处理完数据后向客户端发送一个报文之后进入状态客户端接受到报文回答一个报文同时自己的状态进入服务器收到报文后进入状态客户端经过后一段时间后自动进入状态丢包重传的情况为什么需要四次挥手关闭连接时客户端向服务端发送只是代表了客户端不发送数据了但是还是可以去接受数据服务端收到客户端的时回首先回复一个的报文而服务端可能还有数据需要处理和转发等服务器不在发送数据后才会回复一个报文向客户端表示同意关闭连接了故服务端通常是要等待数据发送和处理完所以服务端的和会分开发送即是四次挥手服务器出现大量的状态有那些原因没有使用长连接长连接超时长连接请求达到数量功能重传机制滑动窗口流量控制拥塞控制层层是在网络层主要作用是实现主机与主机之间的通信即是点对点通信网络层和数据链路层的区别和关系的作用是实现直连的两个设备之间的通信而层则负责在没有直连的两个网络之间进行通信传输计算机中是依靠数据链路层和网络层去实现目标的最终通信在网络传输的过程中源和目标地址是不会变化的除了技术只有源和目标的在不断地发生变化不停的在网络中去寻找下一跳要发送的地方在网络通信中为了保证能正常的通信每个设备都要配置正确的地址以便寻址地址分类地址最初被划分成五种类型通过前几位来判断是处于的地方在主机号中有两个是特殊的主机号全为指定某个网络下的所有主机用于广播分本地广播和直接广播主机号为指定某个网络无分类地址由于分类存在一些缺点比如同一个网络下没有地址层次缺少地址的灵活性大类中的数量不能很好的与现实网络匹配等提出了无分类地址的概念位的地址划分成了前面网络号后面是主机号怎么划分网络号和主机号呢变现形式有表示网络号给地址和子网掩码去进行与运算得到网络号为什么存在网络号方便路由寻址工作在路由寻址的时候先进行广播找到网络地址是否相同如果相同则在同一个网段内直接发送数据包到目的主机即可用于路由控制子网掩码的另一个作用可以划分子网将主机地址划分成子网网络地址子网主机地址地址和路由控制地址中的网络地址这一部分是用于进行路由控制路由控制表中记录着网络地址和下一步应该发送至路由器的地址在主机和路由器上都会有各自的路由器控制表在发送包时首先要确定包首部中的目标地址再从路由控制表中找到与该地址具有相同网络地址的记录根据该记录将包转发给相应的下一个路由器如果路由控制表中存在多条相同网络地址的记录就选择相同位数最多的网络地址也就是最长匹配协议相关技术域名解析递归或者循环去取数据去完成查询到最终域名的地址从本地域名开始访问根域不同的向下查询通过协议可以根据地址去查询到对应的地址是借助请求和响应来完成功能的通过广播发送请求设备去查看在形成响应返回得到信息操作系统中存在的反之有协议去获取动态的全程通信使用生成私有用于学校家庭等设备很多的地方可以架设一个池互联网控制报文协议确认包是否成功的送达目标地址报告发送过程中包被废弃的原因和改善网络设施等从输入网址到页面显示发生了那些过程请求而发送过程总体来说大致是以下几个过程生产信息解析生成发送给服务器的请求信息解析递归的根据域名查询地址优化中有缓存负载均衡协议栈通过获取到地址后可以把的传输工作交给操作系统中的协议栈发起请求三次握手保证双方都有发送和接受的能力和四次挥手建立链接生成报文发送请求定位模块将数据封装成网络包发给通信的对象源地址客户端地址根据路由表规则去匹配判断那张网卡去发送可以手动配置静态路由也可以通过路由协议去配置动态路由表地址两点传输发送请求层链路层服务器处理请求返回报文浏览器解析渲染页面断开连接为什么浮点数在内存中是怎么存储的",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-08-27 08:38:11",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W3DLGJMJDY"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W3DLGJMJDY")</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/yueyun.jpg"><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">月晕</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>留言</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/resume/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size:.9em"></i><span> 简历</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><div class="nav-change" id="nav-darkmode"><a class="darkmode_switchbutton" title="显示模式切换" onclick="darkmo" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><input id="center-console" type="checkbox"><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url">面试题</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JavaScript/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaScript</span></a><a class="article-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>前端</span></a><a class="article-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>面试题</span></a></span></div></div><h1 class="post-title" itemprop="name headline">常见前端面试题详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="post-meta-icon anzhiyufont anzhiyu-icon-calendar-days"></i><span class="post-meta-label">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-12-14T20:50:44.000Z" title="发表于 2023-12-14 20:50:44">2023-12-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>36分钟</span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为杭州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>杭州</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/8b326882.html#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702557879900.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.yueyun.site/posts/8b326882.html"><header><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url">面试题</a><a href="/tags/JavaScript/" tabindex="-1" itemprop="url">JavaScript</a><a href="/tags/%E5%89%8D%E7%AB%AF/" tabindex="-1" itemprop="url">前端</a><a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" tabindex="-1" itemprop="url">面试题</a><h1 id="CrawlerTitle" itemprop="name headline">常见前端面试题详解</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">月晕</span><time itemprop="dateCreated datePublished" datetime="2023-12-14T20:50:44.000Z" title="undefined 2023-12-14 20:50:44">2023-12-14</time></header><h3 id="new-操作符"><a href="#new-操作符" class="headerlink" title="new 操作符"></a>new 操作符</h3><p><code>JavaScript</code>中的 new 操作符是对一个构造函数创建实例的过程 如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> yueyun = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;yueyun&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(yueyun)</span><br></pre></td></tr></table></figure><p>new 通过构造器创建的实例能访问构造函数中的属性 可以访问到构造属性原型链的属性</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myNew</span> (<span class="title class_">Func</span>,...args) &#123;</span><br><span class="line">    <span class="comment">// 创建一个新的对象</span></span><br><span class="line">    <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">    <span class="comment">// 新对象的原型指向原型链</span></span><br><span class="line">	obj.<span class="property">__proto__</span> = <span class="title class_">Func</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">    <span class="comment">// 绑定this</span></span><br><span class="line">    <span class="keyword">const</span> result = <span class="title class_">Func</span>.<span class="title function_">apply</span>(obj,..<span class="property">args</span>)</span><br><span class="line">    <span class="keyword">return</span> result <span class="keyword">instanceof</span> <span class="title class_">Object</span> ? result : obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="为什么要使用虚拟-DOM-虚拟-DOM-的性能一定比真实-DOM-差吗？"><a href="#为什么要使用虚拟-DOM-虚拟-DOM-的性能一定比真实-DOM-差吗？" class="headerlink" title="为什么要使用虚拟 DOM 虚拟 DOM 的性能一定比真实 DOM 差吗？"></a>为什么要使用虚拟 DOM 虚拟 DOM 的性能一定比真实 DOM 差吗？</h3><p>虚拟 DOM 比上真实 DOM 有如下几点原因</p><ul><li>性能优化： 真实的 DOM 操作是昂贵的（性能消耗较大）。每次更改页面上的某个小部分时，浏览器可能需要重新计算布局并重新绘制整个页面。虚拟 DOM 允许框架在 JavaScript 中构建一个轻量级的 DOM 树副本 配合使用 Diff 算法 计算出渲染为真实 dom 的最小代价操作，再渲染为真实 DOM 利用 JS 运算成本来换取 DOM 执行成本的操作，而 JS 的运算速度快很多。<ul><li>DOM 引擎、JS 引擎 相互独立，但又工作在同一线程（主线程）</li><li>JS 代码调用 DOM API 必须 挂起 JS 引擎、转换传入参数数据、激活 DOM 引擎，DOM 重绘后再转换可能有的返回值，最后激活 JS 引擎并继续执行若有频繁的 DOM API 调用，且浏览器厂商不做“批量处理”优化，</li><li>引擎间切换的单位代价将迅速积累若其中有强制重绘的 DOM API 调用，重新计算布局、重新绘制图像会引起更大的性能消耗。</li><li>虚拟 DOM 不会立马进行排版与重绘操作</li><li>虚拟 DOM 进行频繁修改，然后一次性比较并修改真实 DOM 中需要改的部分，最后在真实 DOM 中进行排版与重绘，减少过多 DOM 节点排版与重绘损耗</li><li>虚拟 DOM 有效降低大面积真实 DOM 的重绘与排版，因为最终与真实 DOM 比较差异，可以只渲染局部</li></ul></li><li>声明式编程：使用虚拟 DOM 允许开发者通过声明式编程更加直观和简洁地描述界面应该呈现的样子。开发者只需关心数据的状态，界面应该如何根据这些状态变化而变化，而不是如何操作 DOM 来实现这些变化</li><li>跨平台： 虚拟 DOM 作为一个简单的 JavaScript 对象模型，可以使得同一个应用能够运行在不同的环境中，例如在浏览器、服务器（SSR）、甚至原生移动应用中（如 React Native）。这种跨平台的能力是因为虚拟 DOM 提供了一个与具体平台无关的中间层。</li></ul><h3 id="SPA-和-MPA"><a href="#SPA-和-MPA" class="headerlink" title="SPA 和 MPA"></a>SPA 和 MPA</h3><p>SPA 即是(single page application) 意思是单页应用 网页应用模型 就是一张 web 页面(index.html)单页面跳转仅刷新局部资源、公共资源仅需要加载一次 即是使用 JS 去感知 URL 的变化去做动态改变</p><p>好处即是：性能更快 页面跳转时不用处理<code>html</code> 节约了请求花费 用户体验好 快 良好的前后端分离 传递数据方便 一般是高度交互的应用使用 SPA 比较多</p><p>缺点即使：SEO 不友好 内容通过 JavaScript 动态加载</p><p>MPA：多页面应用，MPA 在用户浏览不同的页面时，服务器将为每个请求返回新的 HTML 页面。这意味着每次用户请求新页面或刷新现有页面时，整个页面都会被重新加载 适合内容丰富的网站，如新闻网站、电商平台等，它们可以从每个页面的独立 URL 中获益。</p><p>路由的 history 和 hash 两种模式</p><p>Hash 模式主要是通过 URL 中的哈希值变化来控制页面的显示兼容性好，可以在不支持 HTML5 History API 的老旧浏览器中使用 ，而 History 模式则是利用 HTML5 的 History API 来实现 URL 的变化，URL 看起来更美观，没有#符号，用户体验更接近传统的多页面应用</p><p>hash 模式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Router</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 存放url 以及对应的callback</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span> = &#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentUrl</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">      <span class="string">&#x27;load&#x27;</span>,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 回调</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    )</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hashchange&#x27;</span>, <span class="function">() =&gt;</span> &#123;&#125;, <span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">router</span>(<span class="params">path, cb</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routers</span>[path] = cb</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">push</span>(<span class="params">path</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span>[path] &amp;&amp; <span class="variable language_">this</span>.<span class="property">routes</span>[path]()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">miniRouter</span> = <span class="keyword">new</span> <span class="title class_">Router</span>()</span><br><span class="line">miniRouter.<span class="title function_">route</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;page1&#x27;</span>))</span><br><span class="line">miniRouter.<span class="title function_">route</span>(<span class="string">&#x27;/page2&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;page2&#x27;</span>))</span><br><span class="line"></span><br><span class="line">miniRouter.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// page1</span></span><br><span class="line">miniRouter.<span class="title function_">push</span>(<span class="string">&#x27;/page2&#x27;</span>) <span class="comment">// page2</span></span><br></pre></td></tr></table></figure><p>history 模式</p><p>history 模式借用<code>HTML5 history api</code> <code>api</code> 提供了丰富的 <code>router</code> 相关属性先了解一个几个相关的 api</p><ul><li><code>history.pushState</code> 浏览器历史纪录添加记录</li><li><code>history.replaceState</code>修改浏览器历史纪录中当前纪录</li><li><code>history.popState</code> 当 <code>history</code> 发生变化时触发</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Router</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 存放url 以及对应的callback</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span> = &#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">listerPopState</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">init</span>(<span class="params">path</span>) &#123;</span><br><span class="line">    history.<span class="title function_">replaceState</span>(&#123; <span class="attr">path</span>: path &#125;, <span class="literal">null</span>, path)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span>[path] &amp;&amp; <span class="variable language_">this</span>.<span class="property">routes</span>[path]()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">route</span>(<span class="params">path, cb</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span>[path] = cb</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">push</span>(<span class="params">path</span>) &#123;</span><br><span class="line">    history.<span class="title function_">pushState</span>(&#123; <span class="attr">path</span>: path &#125;, <span class="literal">null</span>, path)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routes</span>[path] &amp;&amp; <span class="variable language_">this</span>.<span class="property">routes</span>[path]()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">listerPopState</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;popstate&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> path = e.<span class="property">state</span> &amp;&amp; e.<span class="property">state</span>.<span class="property">path</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">routes</span>[path] &amp;&amp; <span class="variable language_">this</span>.<span class="property">routes</span>[path]()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">miniRouter</span> = <span class="keyword">new</span> <span class="title class_">Router</span>()</span><br><span class="line">miniRouter.<span class="title function_">route</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;page1&#x27;</span>))</span><br><span class="line">miniRouter.<span class="title function_">route</span>(<span class="string">&#x27;/page2&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;page2&#x27;</span>))</span><br><span class="line"></span><br><span class="line">miniRouter.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// page1</span></span><br><span class="line">miniRouter.<span class="title function_">push</span>(<span class="string">&#x27;/page2&#x27;</span>) <span class="comment">// page2</span></span><br></pre></td></tr></table></figure><p>如何给 SPA 做 seo 优化？</p><ol><li>服务端渲染 比如<code>nuxt</code> <code>next</code>等</li><li>静态化（静态站点生成 SSG）<ul><li>一种是通过程序将动态页面抓取并保存为静态页面</li><li>通过 WEB 服务器的 <code>URL Rewrite</code>的方式，它的原理是通过 web 服务器内部模块按一定规则将外部的 URL 请求转化为内部的文件地址，一句话来说就是把外部请求的静态地址转化为实际的动态页面地址，而静态页面实际是不存在的</li></ul></li></ol><h3 id="React-Fiber-架构"><a href="#React-Fiber-架构" class="headerlink" title="React Fiber 架构"></a>React Fiber 架构</h3><h4 id="Fiber-是什么"><a href="#Fiber-是什么" class="headerlink" title="Fiber 是什么"></a>Fiber 是什么</h4><blockquote><p>Fiber 是 react16 中新的协调引擎, 主要目的是使 Virtual Dom 可以进行增量式的渲染(FiberNode)</p></blockquote><ul><li>React 的 Reconciler 基于 Fiber 节点实现, 即是 <code>Fiber Reconciler</code></li><li>作为静态的数据结构来说, 每个 Fiber 节点对应一个 React Element, 保存了该组件类型(函数组件&#x2F;类组件&#x2F;原生组件), 对应的 DOM 节点信息</li><li>作为动态的工作单位, 每个 fiber 节点保存了本次更新的组件变更状态, 要执行的操作状态(删除&#x2F;插入&#x2F;更新)</li></ul><p>无论是作为数据结构还是工作单位, 都是使用 FiberNode 的身份存在, 即在 react 架构中命令为 Fiber, 协调器就是 Fiber Reconciler</p><h4 id="Fiber-的作用"><a href="#Fiber-的作用" class="headerlink" title="Fiber 的作用"></a>Fiber 的作用</h4><p>为了解决 React15 在组件中更新时产生的卡顿现象, 构建出了 Fiber 架构, 并在 React16 中发布, 将同步递归无法终中断的更新 重构为 异步的可中断更新</p><ul><li>把可中断的任务拆分成小任务</li><li>对正在做的任务调整优先次序, 重做, 复用等</li><li>在父子任务间切换, 支持 React 执行过程中的布局刷新</li><li>支持 render 返回多个元素</li><li>error bounday</li></ul><p>React 中的架构</p><ul><li>Scheduler(调度器): 一个渲染工作分解成多个小任务，并在多个帧之间分配和执行这些任务(requestldleCallback)</li><li>Reconciler(协调器): Reconciler 则从递归变成了可以中断的循环过程。每次循环都会调用 shouldYield 判断当前是否有剩余时间</li><li>Render(渲染器): 将 Reconciler 打上标签的虚拟 DOM 对象（即 FiberNode）执行成 DOM（JS 变 视图）</li></ul><h4 id="Fiber-理论实现"><a href="#Fiber-理论实现" class="headerlink" title="Fiber 理论实现"></a>Fiber 理论实现</h4><p>优先级分配 + 异步可中断</p><h4 id="FiberNode-的结构"><a href="#FiberNode-的结构" class="headerlink" title="FiberNode 的结构"></a>FiberNode 的结构</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">FiberNode</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="variable language_">this</span>: $FlowFixMe,</span></span><br><span class="line"><span class="params">  tag: WorkTag,</span></span><br><span class="line"><span class="params">  pendingProps: mixed,</span></span><br><span class="line"><span class="params">  key: <span class="literal">null</span> | <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  mode: TypeOfMode</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Instance 作为静态数据结构的属性</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">tag</span> = tag</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">key</span> = key</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">elementType</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">type</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">stateNode</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Fiber 用于连接其他 FiberNode 形成 Fiber Tree</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">return</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">child</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sibling</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">index</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">ref</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">refCleanup</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 作为动态的工作单元的属性</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pendingProps</span> = pendingProps</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">memoizedProps</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">updateQueue</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">memoizedState</span> = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dependencies</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">mode</span> = mode</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Effects</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">flags</span> = <span class="title class_">NoFlags</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">subtreeFlags</span> = <span class="title class_">NoFlags</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">deletions</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 调度优先级相关</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">lanes</span> = <span class="title class_">NoLanes</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">childLanes</span> = <span class="title class_">NoLanes</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 指向该fiber在另一次更新时对应的fiber</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">alternate</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Fiber-是如何工作的"><a href="#Fiber-是如何工作的" class="headerlink" title="Fiber 是如何工作的"></a>Fiber 是如何工作的</h4><ul><li>ReactDOM.render() (mount) 和 setState (update) 的时候开始创建更新</li><li>Schedule(调度器)设置优先级, 并将创建的更新加入任务队列, 等待调度</li><li>在 RequestldleCallback 空闲时执行任务</li><li>从根节点开始遍历 FiberNode，并且构建 WorkInProgress Tree</li><li>Reconciler（协调器） 阶段生成 EffectList（对其打标签，进行 Diff 对比）</li><li>Renderer（渲染器） 根据 EffectList 更新 DOM</li></ul><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><h4 id="单例模式-Singleton"><a href="#单例模式-Singleton" class="headerlink" title="单例模式(Singleton)"></a>单例模式(Singleton)</h4><blockquote><p>确保一个类只有一个实例, 并提供全局访问点来获取该实例</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="comment">// 保存单例实例的私有静态属性</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="attr">instance</span>: <span class="title class_">Singleton</span></span><br><span class="line">  <span class="comment">// 构造函数私有化，防止外部实例化</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 初始化代码</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 获取单例实例的静态方法</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">getInstance</span>(): <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// 如果实例不存在，创建一个新的实例</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Singleton</span>.<span class="property">instance</span>) &#123;</span><br><span class="line">      <span class="title class_">Singleton</span>.<span class="property">instance</span> = <span class="keyword">new</span> <span class="title class_">Singleton</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回唯一的实例</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Singleton</span>.<span class="property">instance</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 示例方法</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">someMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;This is a method of the Singleton class.&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用单例</span></span><br><span class="line"><span class="keyword">const</span> singleton1 = <span class="title class_">Singleton</span>.<span class="title function_">getInstance</span>()</span><br><span class="line"><span class="keyword">const</span> singleton2 = <span class="title class_">Singleton</span>.<span class="title function_">getInstance</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证两个实例是否相同</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(singleton1 === singleton2) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用示例方法</span></span><br><span class="line">singleton1.<span class="title function_">someMethod</span>()</span><br></pre></td></tr></table></figure><h4 id="工厂模式-Factory"><a href="#工厂模式-Factory" class="headerlink" title="工厂模式(Factory)"></a>工厂模式(Factory)</h4><blockquote><p>通过工厂方法创建对象，而不是直接使用<code>new</code>操作符。这样可以隐藏具体实现，并根据需要创建所需类型的对象</p></blockquote><p>假设我们现在有一个产品接口<code>Product</code>和两个具体的产品类<code>ConcreteProductA</code>|<code>ConcreteProductB</code> 我们将使用一个工厂类<code>ProductFactory</code>来创建这些产品的实例</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="title function_">operation</span>(): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteProductA</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">operation</span>():<span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Result of the ConcreteProductA&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteProductB</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">operation</span>():<span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Result of the ConcreteProductB&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProductFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title function_">createProduct</span>(<span class="attr">type</span>:<span class="built_in">string</span>):<span class="title class_">Product</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span>(<span class="keyword">type</span>) &#123;</span><br><span class="line">        	<span class="attr">case</span>: <span class="string">&#x27;A&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConcreteProductA</span>()</span><br><span class="line">            <span class="attr">case</span>: <span class="string">&#x27;B&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConcreteProductB</span>();</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Unknow product type.&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建产品A的实例</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">productA</span>: <span class="title class_">Product</span> = <span class="title class_">ProductFactory</span>.<span class="title function_">createProduct</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(productA.<span class="title function_">operation</span>()); <span class="comment">// 输出: Result of the ConcreteProductA</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建产品B的实例</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">productB</span>: <span class="title class_">Product</span> = <span class="title class_">ProductFactory</span>.<span class="title function_">createProduct</span>(<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(productB.<span class="title function_">operation</span>()); <span class="comment">// 输出: Result of the ConcreteProductB</span></span><br></pre></td></tr></table></figure><h4 id="观察者模式-Observer"><a href="#观察者模式-Observer" class="headerlink" title="观察者模式(Observer)"></a>观察者模式(Observer)</h4><blockquote><p>定义了一种对一对多的依赖关系, 当一个对象状态发生改变时, 他的所有依赖者 (观察者) 都会收到通知并自动更新</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 观察目标</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubJect</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observes</span> = []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">observe</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observes</span>.<span class="title function_">push</span>(observe)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">remove</span>(<span class="params">observe</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observes</span> = <span class="variable language_">this</span>.<span class="property">observes</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item !== observe)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      item.<span class="title function_">update</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observe</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;update&#x27;</span>, <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observe1 = <span class="keyword">new</span> <span class="title class_">Observe</span>(<span class="string">&#x27;observe1&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> observe2 = <span class="keyword">new</span> <span class="title class_">Observe</span>(<span class="string">&#x27;observe2&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> sub = <span class="keyword">new</span> <span class="title class_">SubJect</span>()</span><br><span class="line">sub.<span class="title function_">add</span>(observe1)</span><br><span class="line">sub.<span class="title function_">add</span>(observe2)</span><br><span class="line">sub.<span class="title function_">remove</span>(observe1)</span><br><span class="line">sub.<span class="title function_">notify</span>()</span><br></pre></td></tr></table></figure><h4 id="装饰器模式-Decorator"><a href="#装饰器模式-Decorator" class="headerlink" title="装饰器模式(Decorator)"></a>装饰器模式(Decorator)</h4><blockquote><p>动态地将责任附加到对象上, 通过将对象包装在装饰器对象中, 可以在运行时为对象添加新的行为,对已有的功能进行拓展, 这样不会更改原有的代码, 对其他的业务产生影响 这方便我们在较少的改动下对软件功能进行拓展</p></blockquote><p>比如现在给上传数据加上一个 pv 操作</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">before</span> = <span class="keyword">function</span> (<span class="params">beforeFn</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    beforeFn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, ...args)</span><br><span class="line">    <span class="keyword">return</span> that.<span class="title function_">apply</span>(<span class="variable language_">this</span>, ...args)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">log</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打印上传前的日志&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">upload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;上传数据&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">newUpload = upload.<span class="title function_">before</span>(log)</span><br><span class="line"><span class="title function_">newUpload</span>()</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;reflect-metadata&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Get</span>(<span class="params">path: <span class="built_in">string</span></span>): <span class="title class_">MethodDecorator</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">target, propertyKey</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Reflect</span>.<span class="title function_">defineMetadata</span>(<span class="string">&#x27;path&#x27;</span>, path, target, propertyKey)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 fetch 发起请求</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchRequest</span>(<span class="params">path: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(path)</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">  <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 装饰器处理器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params"></span></span><br><span class="line"><span class="params">  target: <span class="built_in">any</span>,</span></span><br><span class="line"><span class="params">  propertyKey: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  descriptor: PropertyDescriptor</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> method = descriptor.<span class="property">value</span></span><br><span class="line"></span><br><span class="line">  descriptor.<span class="property">value</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">...args: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> path = <span class="title class_">Reflect</span>.<span class="title function_">getMetadata</span>(<span class="string">&#x27;path&#x27;</span>, target, propertyKey)</span><br><span class="line">    <span class="keyword">if</span> (path) &#123;</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchRequest</span>(path)</span><br><span class="line">      <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [data, ...args])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例控制器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)</span><br><span class="line">  <span class="meta">@handleRequest</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetchData</span>(<span class="params">data: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Fetched Data:&#x27;</span>, data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用控制器</span></span><br><span class="line">;(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">MyController</span>()</span><br><span class="line">  <span class="keyword">await</span> controller.<span class="title function_">fetchData</span>()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h4 id="策略模式-Strategy"><a href="#策略模式-Strategy" class="headerlink" title="策略模式(Strategy)"></a>策略模式(Strategy)</h4><blockquote><p>定义了一系列算法，将每个算法封装起来并使它们可以相互替换。策略模式可以让算法独立于客户端而变化</p></blockquote><p>比如创建一个简单的支付系统, 有不同的支付策略</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 策略接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line">  <span class="title function_">pay</span>(<span class="attr">amount</span>: <span class="built_in">number</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体策略：信用卡支付</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CreditCardPayment</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line">  <span class="title function_">pay</span>(<span class="attr">amount</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Paid <span class="subst">$&#123;amount&#125;</span> using Credit Card.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体策略：PayPal支付</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PaypalPayment</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line">  <span class="title function_">pay</span>(<span class="attr">amount</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Paid <span class="subst">$&#123;amount&#125;</span> using PayPal.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上下文类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PaymentContext</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">strategy</span>: <span class="title class_">PaymentStrategy</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">strategy: PaymentStrategy</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">strategy</span> = strategy</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setStrategy</span>(<span class="params">strategy: PaymentStrategy</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">strategy</span> = strategy</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">executeStrategy</span>(<span class="attr">amount</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">strategy</span>.<span class="title function_">pay</span>(amount)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> creditCardPayment = <span class="keyword">new</span> <span class="title class_">CreditCardPayment</span>()</span><br><span class="line"><span class="keyword">const</span> paypalPayment = <span class="keyword">new</span> <span class="title class_">PaypalPayment</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> paymentContext = <span class="keyword">new</span> <span class="title class_">PaymentContext</span>(creditCardPayment)</span><br><span class="line">paymentContext.<span class="title function_">executeStrategy</span>(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">paymentContext.<span class="title function_">setStrategy</span>(paypalPayment)</span><br><span class="line">paymentContext.<span class="title function_">executeStrategy</span>(<span class="number">200</span>)</span><br></pre></td></tr></table></figure><h4 id="适配器模式-Adapter"><a href="#适配器模式-Adapter" class="headerlink" title="适配器模式(Adapter)"></a>适配器模式(Adapter)</h4><blockquote><p>将一个类的接口转换成客户端所期望的另一个接口。适配器模式使得原本由于接口不匹配而无法一起工作的类可以协同工作</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TencentMap</span> &#123;</span><br><span class="line">  <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;腾讯地图渲染&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiduMap</span> &#123;</span><br><span class="line">  <span class="title function_">display</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;百度地图渲染&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TencentMapAdapter</span> <span class="keyword">extends</span> <span class="title class_ inherited__">TencentMap</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">showMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">show</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiduMapAdapter</span> <span class="keyword">extends</span> <span class="title class_ inherited__">BaiduMap</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">showMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">display</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">map</span>) &#123;</span><br><span class="line">  map.<span class="title function_">showMap</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="keyword">new</span> <span class="title class_">TencentMapAdapter</span>())</span><br><span class="line"><span class="title function_">render</span>(<span class="keyword">new</span> <span class="title class_">BaiduMapAdapter</span>())</span><br></pre></td></tr></table></figure><h3 id="渲染是十万条数据解决方案"><a href="#渲染是十万条数据解决方案" class="headerlink" title="渲染是十万条数据解决方案"></a>渲染是十万条数据解决方案</h3><ul><li><p>虚拟列表(按需渲染 || 可视区域渲染)</p><blockquote><p>虚拟列表是按需显示的一种实现, 即只对可见区域进行渲染, 对非可见区域的数据不渲染或部分渲染的技术, 通过监听 scroll 来判断是上滑还是下拉, 从而更新数据, 同理 IntersectionObserver 和 getBoundingClientReact 实现</p></blockquote></li><li><p>延迟渲染(即懒渲染)</p><blockquote><p>最开始不渲染所有数据，只渲染可视区域中的数据（同虚拟列表一致）。当滚动到页面底部时，添加数据（concat），视图渲染新增 DOM</p></blockquote></li><li><p>时间分片</p><blockquote><p>分批渲染 DOM，使用 requestAnimationFrame 来让动画更加流畅, 在浏览器渲染的每一帧的空闲时间去渲染数据</p></blockquote></li></ul><h3 id="为什么-Hooks-不能存在条件判断中"><a href="#为什么-Hooks-不能存在条件判断中" class="headerlink" title="为什么 Hooks 不能存在条件判断中"></a>为什么 Hooks 不能存在条件判断中</h3><p>在 React 中, Hooks 是基于顺序调用的, 意味着在 Hooks 的调用顺序必须保持稳定, 不能在渲染的过程中发生改变, 这样会导致顺序发生变化, 违反了 React Hooks 设计规则, 在重新 render 的时候, react 会根据 hooks 的调用顺序来确定每个 hook 的对应状态, 如果放入条件语句中会导致组件的状态混乱, 不可测</p><p>在 React Hooks 的源码中, Hooks 的状态是与组件实例相关联, 每次组件重新渲染时, React 会使用相同的顺序来调用 hooks, 这样才能确保正确的管理组件状态, Hooks 的实现是基于链表结构, 当组件函数被调用的时候, React 会根据 Hooks 的调用顺序创建一个链表, 并将这个链表与实例相关联, 而这个 hook 存在一个对象里面存在一些属性(fiber)</p><h3 id="事件循环机制-浏览器-和-nodejs-环境"><a href="#事件循环机制-浏览器-和-nodejs-环境" class="headerlink" title="事件循环机制(浏览器 和 nodejs 环境)"></a>事件循环机制(浏览器 和 nodejs 环境)</h3><h3 id="JSONP-原理以及实现"><a href="#JSONP-原理以及实现" class="headerlink" title="JSONP 原理以及实现"></a>JSONP 原理以及实现</h3><h3 id="什么是简单方法什么是复杂方法"><a href="#什么是简单方法什么是复杂方法" class="headerlink" title="什么是简单方法什么是复杂方法"></a>什么是简单方法什么是复杂方法</h3><h3 id="表格中的form-data和json的异同"><a href="#表格中的form-data和json的异同" class="headerlink" title="表格中的form-data和json的异同"></a>表格中的form-data和json的异同</h3><h3 id="Cookie的配置"><a href="#Cookie的配置" class="headerlink" title="Cookie的配置"></a>Cookie的配置</h3><h3 id="JavaScript-中的垃圾回收机制"><a href="#JavaScript-中的垃圾回收机制" class="headerlink" title="JavaScript 中的垃圾回收机制"></a>JavaScript 中的垃圾回收机制</h3><h3 id="ESmodule-和-CommonJS-的差别"><a href="#ESmodule-和-CommonJS-的差别" class="headerlink" title="ESmodule 和 CommonJS 的差别"></a>ESmodule 和 CommonJS 的差别</h3><h3 id="ES6-的新增语法"><a href="#ES6-的新增语法" class="headerlink" title="ES6 的新增语法"></a>ES6 的新增语法</h3><h3 id="原型和原型链"><a href="#原型和原型链" class="headerlink" title="原型和原型链"></a>原型和原型链</h3><h3 id="事件的冒泡和委托"><a href="#事件的冒泡和委托" class="headerlink" title="事件的冒泡和委托"></a>事件的冒泡和委托</h3><h3 id="浏览器的-Debug"><a href="#浏览器的-Debug" class="headerlink" title="浏览器的 Debug"></a>浏览器的 Debug</h3><h3 id="Promise-链中的-catch-和-try-catch-的区别"><a href="#Promise-链中的-catch-和-try-catch-的区别" class="headerlink" title="Promise 链中的 catch 和 try catch 的区别"></a>Promise 链中的 catch 和 try catch 的区别</h3><h2 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h2><blockquote><p>TCP&#x2F;IP 网络模型 一种通用的网络协议</p></blockquote><p>应用层 –&gt; 传输层 –&gt; 网络层 –&gt; 网络应用层 –&gt; 物理链路层</p><h3 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h3><ul><li><code>1xx</code>：属于提示信息，是协议处理中的中间状态(用到的少)</li><li><code>2xx</code>：表示服务器成功的处理了客户端的请求(预期情况)<ul><li><code>200ok</code>：最常见的成功状态码，表示一切正常，如果是非<code>HEAD</code>请求，服务器返回的响应头都会有<code>body</code>数据</li><li><code>204 No Content</code>：表示成功状态码，与 200 相同但是没有 body 数据</li><li><code>206 Partial Content</code>：应用于 HTTP 分块下载或者是断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分</li></ul></li><li><code>3xx</code>：表示客户端的请求资源发生了变动，需要客户端用新的 url 去重新发生请求获取资源，即是<strong>重定向</strong><ul><li><code>301 Moved Permanently</code>：永久重定向，说明请求的资源已经不存在了，需要用新的 url 去再次访问</li><li><code>302 Found</code>：表示临时重定向，说明请求的资源还在，但暂时需要改用新的 url 去访问</li><li><code>304 Not Modified</code>：不具有跳转的含义，表示资源未修改，去重定向已经缓存的文件，也称<strong>缓存重定向</strong>，用于缓存控制</li></ul></li><li><code>4xx</code>：表示客户端发送的报文有误，服务器无法处理<ul><li><code>400 Bad Request</code>：表示客户端的请求报文有错误，是一个笼统的错误处理</li><li><code>403 Forbidden</code>：表示服务器禁止访问资源 ，而不是客户端错误</li><li><code>404 Not Found</code>：表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端</li></ul></li><li><code>5xx</code>：表示客户端请求报文正确，但是服务器处理的时候内部发生了错误，属于服务端的错误码<ul><li><code>500 Inter Server Error</code>：与 400 一样是一个笼统的错误码，表示服务器发生了错误</li><li><code>501 Not Implemented</code>：表示客户端的请求还不支付，类似于即将开业的情况</li><li><code>502 Bad Gateway</code>：通常是服务器作为网关或者代理时返回的错误码</li><li><code>503 Service Unavalible</code>：服务器很忙暂时无法响应</li></ul></li></ul><h3 id="HTTP-中常见字段"><a href="#HTTP-中常见字段" class="headerlink" title="HTTP 中常见字段"></a>HTTP 中常见字段</h3><p><strong>Host 字段</strong>：客户端请求用来指定服务器的域名(Domain + Port)</p><p><strong>Content-length 字段：</strong>表面本次回应的数据长度</p><blockquote><p>Content-length 可以解决 TCP 中的粘包问题<br>TCP 中的粘包问题产生：我们不能认为一个用户消息对应一个 TCP 报文，因为 tcp 在发送报文的过程的时候会经过自己内部的发送窗口，拥塞控制和缓冲区大小等等共同解决的，所以 TCP 是面向字节流的协议</p><p>解决粘包问题在 HTTP 中是有特殊字符作为边界(空格、换行、回车) 和 content-length 作为数据长度 换行符做 HTTP Header 的边界 &amp;&amp; Content-Length 作为 HTTP Body 的边界 从而去解决这个问题</p></blockquote><p><strong>Connection 字段：</strong>常用于客户端要求服务器使用 HTTP 长连接机制，以便其他请求去复用 TCP 通道</p><blockquote><p>HTTP 长连接的特点是：只要任意一端没有明确的提出断开连接，特 TCP 会一直保持连接状态</p><p>HTTP 中的 Keep-Alive 和 TCP 中的 keepalive</p><p>HTTP 中的：HTTP(用户态)中的长链接，避免建立连接和释放的开销，也为 HTTP 流水线技术提供了可实现的基础(客户端可以先一次性发送多个请求，而在发送的过程中不需等待服务器的回应，可以减少整体的响应时间)，但是此时服务器的响应还是要按照顺序，这样就可能前一个请求太慢形成了阻塞也就是常说的队头阻塞问题，为了资源浪费也会设置一个 Keep-Alive-time 的字段去定时断开连接</p><p>TCP 中的：TCP 的保活机制，如果两端 TCP 一直没有数据交互，则达到触发 TCP 保活机制的条件，在内核中的 TCP 协议栈会发送探测报文去判断报告情况</p></blockquote><p><strong>Content-Type 字段(request &amp;&amp; response)：</strong>用于服务器返回的时候告诉客户端本次的数据格式，客户端请求的时候可以加上<strong>Accept</strong>表示自己应该接受什么类型</p><blockquote><p>(响应体中可以规定浏览器的默认行为 指向这次的媒体类型(MIME) text&#x2F;plain &amp;&amp; text&#x2F;html &amp;&amp; text&#x2F;javascript &amp;&amp; …</p></blockquote><p><strong>Content-Ending 字段：</strong>字段说明数据压缩的方式和请求中的可以接受<strong>Accept-Ending</strong>对应</p><h3 id="GET-和-POST"><a href="#GET-和-POST" class="headerlink" title="GET 和 POST"></a>GET 和 POST</h3><p>根据 RFC 规范来说：GET 是指从服务器获取指定资源，GET 的请求参数是写在 url 上的，必须是 ASCII，浏览器会对 URL 的长度有限制。POST 是指根据请求的负荷(body)对指定的资源做出处理，body 可以是任意格式的</p><blockquote><p>幂等：意思是执行多次，结果是一样的</p><p>安全：请求方法不会破坏服务器上面的资源</p></blockquote><p>根据 RFC 规范来看：GET 方法就是安全且幂等的，POST 是不安全且不幂等的</p><p>但是实际开发的过程中 GET 和可以实现增删改服务器上面的资源，POST 也可以用来查询数据，甚至 GET 可以带上 body，POST 也可以加上 URL 参数</p><h3 id="HTTP-缓存技术"><a href="#HTTP-缓存技术" class="headerlink" title="HTTP 缓存技术"></a>HTTP 缓存技术</h3><p>对于一些重复性的 HTTP 请求，比如每次请求到的数据是一样的，可以把这样的请求-响应的数据缓存在本地，避免 HTTP 请求的方法就是使用缓存，HTTP 中的缓存分成<strong>强制缓存</strong>和<strong>协商缓存</strong></p><h4 id="强制缓存-权重高"><a href="#强制缓存-权重高" class="headerlink" title="强制缓存(权重高)"></a>强制缓存(权重高)</h4><p>只要浏览器的缓存没过期，则直接使用浏览器的本地缓存，决定是否使用缓存的主动性在于浏览器</p><p>强制缓存是利用到下面两个 HTTP 响应头部的字段信息去完成的，都用来表示资源在客户端的缓存有效期</p><ul><li><code>Cache-Control：</code>相对时间 &amp;&amp; 也可以设置别的参数 如<code>ctx.set(&#39;Cache-Control&#39;, &#39;max-age=3600, public&#39;)</code> (权重高)</li><li><code>Expries:</code> 是一个相对时间</li></ul><p>流程：浏览器第一次访问服务器资源的时候，服务器会返回某个资源并且在 response 上面设置对应的响应字段，浏览器保存后，在次请求的时候<strong>通过请求资源的时间与 Cache-Control 中设置的过期时间大小，来计算出该资源是否过期</strong>，如果没有，则使用该缓存，服务器在次收到请求后会重新更新头部的<strong>Cache-Control</strong></p><h4 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h4><p><strong>请求响应码是 304</strong>，服务端告知客户端是否可以使用缓存的方式叫<strong>协商缓存</strong>，即通过<strong>协商缓存结果来判断是否可以使用本地缓存</strong></p><p>也可以基于两种形式去完成协商缓存的过程</p><ul><li><code>RES: If-Modified-Since &amp;&amp; REQ: Last-Modified</code>：资源过期后，发现 reponse 中含有 Last-Modified 字段，则在次发起请求的时候带上 Last-Modified 发送给服务器，服务器去根据这项时间去跟对比返回</li><li><code>RES: If-None-Match &amp;&amp; REQ: Etag</code>: 资源过期后，同比较<code>Etag</code> 是否 相同, 一般是使用 hash 去给内容做一个唯一的 token 值去比较，权重高，如果不存在则比较时间</li></ul><p>使用 Etag 的好处：监控的粒度更加深，可以精确到毫秒内，不会存在手动改写时间的情况</p><p><strong>协商缓存字段只有在设置了 Cache-Control 强制缓存字段后，未命中强制缓存的时候，才能发起带有协商缓存的字段请求</strong></p><h3 id="HTTP-特性"><a href="#HTTP-特性" class="headerlink" title="HTTP 特性"></a>HTTP 特性</h3><h4 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h4><ul><li>简单：基本报文格式就是 header + body，头部信息也是：key-value 简单文本形式，易于理解</li><li>灵活，易于扩展：HTTP 中的各种请求方法，URL，状态码，头字段等都没有被规定死，允许开发人员自定义</li><li>应用广泛和跨平台</li><li>无状态：服务器不会去记忆 HTTP 状态，不需要额外的资源去使用，减轻服务器的负担，但是没有记忆性，做到一些关联性操作会非常麻烦于是就引出了关于<code>Cookie</code>等技术</li><li>明文传输，不安全，通信使用明文，不验证通信的双方，不能验证报文的完整性</li></ul><h4 id="HTTP-1-1-性能"><a href="#HTTP-1-1-性能" class="headerlink" title="HTTP&#x2F;1.1 性能"></a>HTTP&#x2F;1.1 性能</h4><p>基于 TCP&#x2F;IP 协议，请求-应答的模式，即性能判断就在这两点上面</p><ul><li>长连接：早期的 HTTP1.0 是每发起一个请求都会建立 TCP 连接&#x2F;断开 TCP 连接，消费资源比较大 1.1 提出长连接，没有一方 close 会一直保持</li><li>管道网络传输：在同一个 TCP 连接中，客户端可以发起多个请求，可以减少整体的响应时间，但是服务器的响应必须按照请求的顺序，这样就造成了队头阻塞的问题</li><li>队头阻塞</li></ul><h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><p>HTTP 是明文传输存在，窃听，篡改，冒充等风险</p><p>HTTPS 在 HTTP 和 TCP 之间增加了<code>SSL/TLS</code>协议，可以很好的解决上面 HTTP 的缺点</p><ul><li>信息加密：混合加密的方式来实现信息的机密性，比如 RSA 算法</li><li>校验机制：摘要算法+数字签名 来实现完整性，为数据生成独一无二的指纹</li><li>身份证书：将服务器公钥放入数字证书中，解决冒充的风险</li></ul><h4 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP&#x2F;2"></a>HTTP&#x2F;2</h4><p>HTTP2 协议是基于 HTTPS 的</p><p>相比较 HTTP&#x2F;1 有如下的更新</p><ul><li>头部压缩：HTTP 中会<strong>压缩头(Header)</strong>,如果同时发送的请求头是一样的，协议栈会消除重复的部分，<code>HPACK</code>算法去打表</li><li>二进制格式：采用二进制格式去实现，头信息和数据体都是二进制，统称为帧(frame)，头信息帧和数据帧</li><li>并发传输：引入 Stream 概念，多个 Stream 复用一条 TCP 的连接，针对不同的 HTTP 请求使用独一无二的 Stream 来区分，可以交错的发送和请求报文</li><li>服务器主动推送资源：服务端和客户端双方都可以建立 Stream，使用数字的奇偶来区分</li></ul><p>缺点：HTTP2 是基于 TCP 协议来传输的数据，TCP 是基于字节流，必须保证接受到的字节流是完整且连续的，这样才会从内核缓冲区中取数据去发送给 HTTP 应用，当前一个字节没有发送的时候，后面的数据只能放在缓冲区中，等待第一个字节数据到达才会发送给 HTTP 应用</p><h4 id="HTTP-3"><a href="#HTTP-3" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h4><p>HTTP&#x2F;1.1 中的管道虽然可以解决请求的问题，但是没有解决响应的队头阻塞问题。HTTP&#x2F;2 虽然通过 Stream 多路复用解决了 HTTP 队头阻塞的问题，但是一旦发现丢包则会阻塞所有的 HTTP 请求，属于 TCP 层的队头阻塞</p><p>HTTP2 中的问题是 TCP 导致的队头阻塞，但是 TCP 的特点就是基于字节流，所以 HTTP3 就是将传输换成了 UDP，实现了基于 UDP 的格式方法机制</p><p>UDP 的 QUIC 协议：在 UDP 上面实现的伪 TCP + TLS + HTTP&#x2F;2 的多路复用协议</p><ul><li>无队头阻塞：QUIC 协议也有类似的 Stream 的机制，保证传输的可靠性，但是多个 Stream 是没有依赖的相互独立，当某个流丢包的时候，只会阻塞这个流，并不会影响到其他的流</li><li>更快的建立连接：因为 QUIC 内部包含 TLS 1.3，因此仅需 1 个 RTT 就可以「同时」完成建立连接与 TLS 密钥协商，甚至在第二次连接的时候，应用数据包可以和 QUIC 握手信息（连接信息 + TLS 信息）一起发送，达到 0-RTT 的效果</li><li>连接迁移无感</li></ul><h3 id="HTTP-优化"><a href="#HTTP-优化" class="headerlink" title="HTTP 优化"></a>HTTP 优化</h3><ul><li><p>尽量避免发送 HTTP 请求：通过缓存技术(HTTP Cache)去完成缓存功能，包括强制缓存和协商缓存等</p></li><li><p>在需要发送 HTTP 请求的时候考虑如何减少次数</p><ul><li>减少重定向请求次数：通过中间层服务器去完成这个定向请求的功能而不是去跟客户端交互</li><li>合并请求：比如通用的配置生成一个 configs 的大请求，小的资源图去形成大的精灵图，减少 HTTP 次数的请求</li><li>延迟发送请求：懒加载，按需请求等</li></ul></li><li><p>减少服务器的 HTTP 响应的数据大小：无损压缩和有损压缩</p></li></ul><h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><p>本质上就是一种基于传输层的一种通信方式，Remote Procedure Call 远程过程调用，调用方式，有很多封装好的 RPC 协议比如 GRPC 等的是在应用层的一种协议，一般是用来在集群内部的通信，调用远端的方法可以屏蔽一些网络的细节</p><p>与 HTTP 的区别：</p><ul><li>服务发现：HTTP 中通过 DNS 服务去解析背后的 IP 和端口，RPC 一般会有中间服务去保存服务器名和 IP 信息，Etcd、redis 等</li><li>底层连接形式：RPC 会在底层建立一个连接池，在请求量大的时候，建立多条连接放在池内</li><li>传输内容：定制程度高，不用考虑浏览的行为，效率性能高</li></ul><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>TCP连接的两端是在<strong>同一时间</strong>，双方都可以主动的想对方发送数据，即是所谓的<strong>全双工</strong>，然而HTTP&#x2F;1.1是基于TCP的，同一段时间段内客户端和服务器只能有一方主动的发送消息即是<strong>半双工</strong></p><p>因为最开始的网页设计就是看文本等场景，只需要请求-应答的模式即可以，但是现在场景越多，需求越多，这样基于TCP的新应用层协议Websocket即出来了</p><p>在早期做到服务器推送消息的时候：</p><p><strong>HTTP 不断轮询：</strong> 在前端代码中不断地定时发 HTTP 请求到服务器，服务器收到请求后给客户端响应信息，伪服务器的推送手段，只是用户无感而已<br>这种缺点也是非常的明显，消耗带宽，满屏的 http 请求，边缘 case 等</p><p><strong>HTTP 长轮询：</strong>将 HTTP 请求的超时时间设置的很大，在这段时间内服务器只要收到了请求的信息，就立马返回给客户端，如果超时则立马发起下一个请求</p><h4 id="浏览器中怎么建立的x连接"><a href="#浏览器中怎么建立的x连接" class="headerlink" title="浏览器中怎么建立的x连接"></a>浏览器中怎么建立的x连接</h4><p>为了在浏览器中兼容HTTP协议，浏览器在进行TCP三次握手后，都统一使用HTTP协议先进行一次通信</p><ul><li><p>如果是普通的HTTP请求，则继续使用HTTP协议进行交互</p></li><li><p>如果是想建立WebSocket过程，则会在HTTP中携带一些特殊的header头信息，如下所示</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>Websocket</span><br><span class="line"><span class="attribute">Sec-WebSocket-Key</span><span class="punctuation">: </span>Explosionaabbccdd32423=123\r\n</span><br></pre></td></tr></table></figure><p>header头的意思是：浏览器想升级协议，并且想升级成WebSocket，同时随机携带一个随机生成的base64码作为key发给服务器</p><p>如果服务器支持WebSocket连接协议就会去走WebSocket的握手流程，同时根据客户端生成的base64码，根据公开的算法去生成对应的字符串返回同时变成101状态码</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">101</span> Switching Protocols\r\n</span><br><span class="line"><span class="attribute">Sec-WebSocket-Accept</span><span class="punctuation">: </span>acnasunafsvnpsirghpw\r\n</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>WebSocket\r\n</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade\r\n</span><br></pre></td></tr></table></figure></li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/post_img/network/websocket_connect.png"></p><h4 id="WebSocket使用场景"><a href="#WebSocket使用场景" class="headerlink" title="WebSocket使用场景"></a>WebSocket使用场景</h4><p>完成的实现了TCP的全双工的能力，并且也解决了粘包问题，适用于服务端和客户端需要大量交互的场景</p><details class="folding-tag" cyan><summary>查看默认打开的折叠框</summary><div class="content"><ul><li>TCP协议本身是全双工的，但是HTTP协议设计的是半双工，对大部分服务器要推送的场景使用WebSocket更合适</li><li>基于简单的场景的比如登录等场景，可以使用长轮询或者定时轮询去实习服务器推送功能</li><li>正因为各个浏览器都支持 HTTP协 议，所以 WebSocket 会先利用HTTP协议加上一些特殊的 header 头进行握手升级操作，升级成功后就跟 HTTP 没有任何关系了</li></ul></div></details><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><h4 id="TCP-的基本格式"><a href="#TCP-的基本格式" class="headerlink" title="TCP 的基本格式"></a>TCP 的基本格式</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/post_img/network/tcp_transport.png"></p><p>序列号：在建立连接计算机随机生成的随机数去做为初始值，通过 SYN 包发送给接收端的主机，每次增加数据字节数去累加判断，<strong>用来解决网络包乱序的问题</strong></p><p>确认应答号：指下一次期望接受收到的数据序列号，<strong>用来解决丢包的问题</strong></p><blockquote><p>TCP 是一个工作在传输层的可靠数据传输的服务，能确保接受端接受到的网络包是无损坏、无间隔、非冗余、按序的</p></blockquote><h4 id="TCP-特点"><a href="#TCP-特点" class="headerlink" title="TCP 特点"></a>TCP 特点</h4><p>TCP 是 <strong>面向连接</strong>、<strong>可靠的</strong>、<strong>基于字节流的</strong>传输层通信协议</p><ul><li><strong>面向连接</strong>：一对一才能连接</li><li><strong>可靠的</strong>：无论网络链路出现了什么样的变化，TCP 都可以保证一个报文一定能到达接收端</li><li><strong>字节流</strong>：用户消息通过 TCP 协议传输时，消息可能会被操作系统分组成多个 TCP 报文，通过消息边界来确定，没接受到的等待，重复的丢弃</li></ul><h4 id="TCP-连接"><a href="#TCP-连接" class="headerlink" title="TCP 连接"></a>TCP 连接</h4><p>用于保证可靠状态和流量传输控制维护的某些状态信息这些信息包括：Sokcet(IP + port)、序列号(解决乱序问题)、窗口大小(流量控制)</p><h4 id="TCP-建立连接过程"><a href="#TCP-建立连接过程" class="headerlink" title="TCP 建立连接过程"></a>TCP 建立连接过程</h4><p>TCP 是面相连接的协议，所以必须先建立连接，连接是通过三次握手来进行的，过程如下</p><ul><li>刚开始：client 和 server 端都处理 CLOSE 状态，server 主动监听端口，变成 LISTEN 状态</li><li>客户端会初始化序列号(client_isn)，将此序列号置于 TCP 首部的序列号字段中，同时把 SYN 的字段设置成 1，表示 SYN 报文，之后把这个 SYN 报文发送给服务端，表示发起连接请求，该报文并不包含应用层数据，发送后的客户端处于 SYN-SEND 状态</li><li>服务端收到客户端的 SYN 后，首先也直接初始化一个随机数字作为 server_isn，放入序列号字段中，同时将确认答应号填成 client_isn + 1 把 SYN 和 ACK 的值都变成 1，发送回去，同时也不包含任何的应用层数据</li><li>客户端接受到了服务端数据后，还要向服务端去发送一个确认消息，确认应答号是 srever_isn + 1，将 ACK 变成 1，之后服务器处于 ESTABLISHED 状态，这个时候可以携带应用层数据</li><li>客户端处于 ESTABLISHED 状态</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/post_img/network/tcp_thrid_get.png"></p><h4 id="为什么需要三次握手"><a href="#为什么需要三次握手" class="headerlink" title="为什么需要三次握手"></a>为什么需要三次握手</h4><ul><li>阻止重复历史连接的初始化：在网络拥堵的情况下，客户端可以确认自己希望收到的应答号去进行对比确认</li><li>同步双方的初始序列号：去除从重复数据，根据数据包的序列号按需接受，可以识别发送的数据包是否被接受</li><li>避免浪费资源</li></ul><h4 id="TCP-断开连接的过程"><a href="#TCP-断开连接的过程" class="headerlink" title="TCP 断开连接的过程"></a>TCP 断开连接的过程</h4><p>TCP 的连接是通过四次挥手来完成</p><ul><li>客户端打算关闭连接，此时会发送一个 TCP 首部 FIN 标志位被置位 1 的报文，即是 FIN 报文，之后客户端进入 FIN_WAIT_1 的状态</li><li>服务端接受到报文信息后就向客户端发送 ACK 应答报文，同时自己的状态进入 CLOSE_WAIT</li><li>客户端接受到 ACK 报文后，进入 FIN_WAIT_2 的状态</li><li>等地服务器处理完数据后，向客户端发送一个 FIN 报文，之后进入 LAST_ACK 状态</li><li>客户端接受到 FIN 报文，回答一个 ACK 报文，同时自己的状态进入 TIME_WAIT</li><li>服务器收到 ACK 报文后，进入 CLOSE 状态</li><li>客户端经过 2MSL 后一段时间后，自动进入 CLOSE 状态(丢包重传的情况)</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/post_img/network/tcp_duankai_four.png"></p><h4 id="为什么需要四次挥手"><a href="#为什么需要四次挥手" class="headerlink" title="为什么需要四次挥手"></a>为什么需要四次挥手</h4><ul><li>关闭连接时，客户端向服务端发送 FIN，只是代表了客户端不发送数据了，但是还是可以去接受数据</li><li>服务端收到客户端的 FIN 时，回首先回复一个 ACK 的报文，而服务端可能还有数据需要处理和转发，等服务器不在发送数据后才会回复一个 FIN 报文向客户端表示同意关闭连接了</li></ul><p>故服务端通常是要等待数据发送和处理完，所以服务端的 ACK 和 FIN 会分开发送即是四次挥手</p><p><strong>服务器出现大量的 TIME_WAIT 状态有那些原因？</strong></p><ul><li>HTTP 没有使用长连接</li><li>HTTP 长连接超时</li><li>HTTP 长连接请求达到数量</li></ul><h4 id="TCP-功能"><a href="#TCP-功能" class="headerlink" title="TCP 功能"></a>TCP 功能</h4><ul><li>重传机制</li><li>滑动窗口</li><li>流量控制</li><li>拥塞控制</li></ul><h3 id="IP-层"><a href="#IP-层" class="headerlink" title="IP 层"></a>IP 层</h3><p>IP层是在网络层，主要作用是：实现主机与主机之间的通信，即是<strong>点对点(end to end)通信</strong></p><blockquote><p>网络层和数据链路层的区别和关系</p><p>MAC的作用是实现直连的两个设备之间的通信，而IP层则负责在没有直连的两个网络之间进行通信传输</p></blockquote><p>计算机中是依靠数据链路层和网络层去实现目标IP的最终通信，在网络传输的过程中，源IP和目标IP地址是不会变化的(除了NAT技术)，只有源MAC和目标的MAC在不断地发生变化，不停的在网络中去寻找下一跳要发送的地方</p><p>在TCP&#x2F;IP网络通信中，为了保证能正常的通信，每个设备都要配置正确的IP地址，以便寻址</p><h4 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h4><p>IP地址最初被划分成ABCDE五种类型，通过前几位来判断是处于的地方</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/post_img/network/IPhuafen.png"></p><p>在主机号中有两个IP是特殊的</p><ul><li>主机号全为1：指定某个网络下的所有主机，用于广播，分本地广播和直接广播</li><li>主机号为0：指定某个网络</li></ul><h4 id="无分类地址-CIDR"><a href="#无分类地址-CIDR" class="headerlink" title="无分类地址 CIDR"></a>无分类地址 CIDR</h4><p>由于IP分类存在一些缺点，比如同一个网络下没有地址层次，缺少地址的灵活性，大类中的数量不能很好的与现实网络匹配等</p><p>提出了无分类地址<code>CIDR</code>的概念32位的地址划分成了前面网络号，后面是主机号</p><blockquote><p>怎么划分网络号和主机号呢？</p><p>变现形式有：a.b.c.d&#x2F;x x表示网络号 &amp;&amp; 给IP地址和子网掩码去进行与运算得到网络号</p></blockquote><p>为什么存在网络号？</p><p>方便路由寻址工作，在路由寻址的时候，先进行广播找到网络地址是否相同，如果相同则在同一个网段内，直接发送数据包到目的主机即可，用于路由控制</p><p>子网掩码的另一个作用：可以划分子网，将主机地址划分成：子网网络地址 &amp; 子网主机地址</p><h4 id="IP地址和路由控制"><a href="#IP地址和路由控制" class="headerlink" title="IP地址和路由控制"></a>IP地址和路由控制</h4><p><strong>IP地址中的网络地址这一部分是用于进行路由控制</strong></p><p>路由控制表中记录着网络地址和下一步应该发送至路由器的地址，在主机和路由器上都会有各自的路由器控制表</p><p>在发送 IP 包时，首先要确定 IP 包首部中的目标地址，再从路由控制表中找到与该地址具有相同网络地址的记录，根据该记录将 IP 包转发给相应的下一个路由器。如果路由控制表中存在多条相同网络地址的记录，就选择相同位数最多的网络地址，也就是最长匹配。</p><p>IP协议相关技术</p><ul><li><strong>DNS：</strong> DNS域名解析，递归或者循环去取数据，去完成查询到最终域名的IP地址，(从本地域名开始访问，根域不同的向下查询)</li><li><strong>ARP：</strong> 通过ARP协议，可以根据IP地址去查询到对应的MAC地址，ARP是借助ARP请求和ARP响应来完成功能的，通过广播发送ARP请求，设备去查看，在形成ARP响应，返回得到信息，操作系统中存在arp的cache，反之有<strong>RARP协议</strong></li><li><strong>DHCP：</strong> DHCP去获取动态的IP，全程通信使用UDP</li><li><strong>NAT：</strong> 生成私有IP，用于学校，家庭等设备很多的地方，可以架设一个NAT池</li><li><strong>ICMP：</strong> 互联网控制报文协议，确认IP包是否成功的送达目标地址，报告发送过程中IP包被废弃的原因和改善网络设施等</li></ul><h3 id="从输入网址到页面显示发生了那些过程"><a href="#从输入网址到页面显示发生了那些过程" class="headerlink" title="从输入网址到页面显示发生了那些过程"></a>从输入网址到页面显示发生了那些过程</h3><blockquote><p>HTTP 请求而发送过程</p></blockquote><p>总体来说大致是以下几个过程</p><ul><li><p>生产 HTTP 信息</p><blockquote><p>解析 URL 生成发送给 Web 服务器的请求信息</p></blockquote></li><li><p>DNS 解析</p><blockquote><p>递归的根据域名查询 IP 地址 DNS 优化中有 DNS 缓存, DNS 负载均衡</p></blockquote></li><li><p>协议栈</p><blockquote><p>通过 DNS 获取到 IP 地址后, 可以把 HTTP 的传输工作交给操作系统中的协议栈 TCP&#x2F;UDP IP</p></blockquote></li><li><p>发起 TCP 请求</p><blockquote><p>三次握手(保证双方都有发送和接受的能力)和四次挥手, 建立 TCP 链接, 生成 TCP 报文</p></blockquote></li><li><p>发送 IP 请求定位</p><blockquote><p>IP 模块将数据封装成网络包发给通信的对象 IP 源地址(客户端地址) 根据路由表规则去匹配判断那张网卡去发送 可以手动配置静态路由, 也可以通过路由协议(RIP OSPF)去配置动态路由表</p></blockquote></li><li><p>Mac 地址两点传输</p></li><li><p>发送 HTTP 请求 (IP 层 – 链路层)</p></li><li><p>服务器处理请求返回 HTTP 报文</p></li><li><p>浏览器解析渲染页面</p></li><li><p>断开连接</p></li></ul><h3><a href="#" class="headerlink"></a></h3><h3 id="为什么-0-1-0-2-0-3"><a href="#为什么-0-1-0-2-0-3" class="headerlink" title="为什么 0.1 + 0.2  !== 0.3"></a>为什么 <code>0.1 + 0.2 !== 0.3</code></h3><h3 id="浮点数在内存中是怎么存储的"><a href="#浮点数在内存中是怎么存储的" class="headerlink" title="浮点数在内存中是怎么存储的"></a>浮点数在内存中是怎么存储的</h3></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/yueyun.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/yueyun.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">月晕</div><div class="post-copyright__author_desc">生命是有光的</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.yueyun.site/posts/8b326882.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://blog.yueyun.site/posts/8b326882.html")'>常见前端面试题详解</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.yueyun.site/posts/8b326882.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.yueyun.site" target="_blank">月晕</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"><span class="categoryes-punctuation"><i class="anzhiyufont anzhiyu-icon-inbox"></i></span>面试题<span class="categoryesPageCount">1</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JavaScript/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaScript<span class="tagsPageCount">10</span></a><a class="post-meta__box__tags" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>前端<span class="tagsPageCount">13</span></a><a class="post-meta__box__tags" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>面试题<span class="tagsPageCount">1</span></a></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/317b894e.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702396713207.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vue学习</div></div></a></div><div class="next-post pull-right"><a href="/posts/938f2f9c.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702557508740.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">React Native开坑</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/938f2f9c.html" title="React Native开坑"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702557508740.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-15</div><div class="title">React Native开坑</div></div></a></div><div><a href="/posts/9ac48510.html" title="React学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1701613946910.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-12</div><div class="title">React学习</div></div></a></div><div><a href="/posts/49ae955a.html" title="React 源码分析"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/wallpaper/2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-15</div><div class="title">React 源码分析</div></div></a></div><div><a href="/posts/d681bdaf.html" title="TypeScript语言学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/liang.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-22</div><div class="title">TypeScript语言学习</div></div></a></div><div><a href="/posts/317b894e.html" title="Vue学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1702396713207.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-12</div><div class="title">Vue学习</div></div></a></div><div><a href="/posts/ea5e4ee3.html" title="Vue部分源码分析"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1700908595951.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-25</div><div class="title">Vue部分源码分析</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display:none">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/yueyun.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__decoration"><img class="avatar-decoration-1" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/avatar_desc/avatar_d1.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="decoration"><img class="avatar-decoration-2" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/avatar_desc/avatar_d2.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="decoration"><img class="avatar-decoration-3" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/avatar_desc/avatar_d3.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="decoration"><img class="avatar-decoration-4" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/avatar_desc/avatar_d4.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="decoration"></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">月晕</h1><div class="author-info__desc">生命是有光的</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=3514392356&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="anzhiyufont anzhiyu-icon-qq"></i></a><a class="social-icon faa-parent animated-hover" href="https://github.com/apprehen" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/554370301" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#new-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.</span> <span class="toc-text">new 操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F-DOM-%E8%99%9A%E6%8B%9F-DOM-%E7%9A%84%E6%80%A7%E8%83%BD%E4%B8%80%E5%AE%9A%E6%AF%94%E7%9C%9F%E5%AE%9E-DOM-%E5%B7%AE%E5%90%97%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">为什么要使用虚拟 DOM 虚拟 DOM 的性能一定比真实 DOM 差吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SPA-%E5%92%8C-MPA"><span class="toc-number">3.</span> <span class="toc-text">SPA 和 MPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Fiber-%E6%9E%B6%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">React Fiber 架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fiber-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">4.1.</span> <span class="toc-text">Fiber 是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fiber-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">Fiber 的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fiber-%E7%90%86%E8%AE%BA%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.3.</span> <span class="toc-text">Fiber 理论实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FiberNode-%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">4.4.</span> <span class="toc-text">FiberNode 的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fiber-%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84"><span class="toc-number">4.5.</span> <span class="toc-text">Fiber 是如何工作的</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.</span> <span class="toc-text">设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-Singleton"><span class="toc-number">5.1.</span> <span class="toc-text">单例模式(Singleton)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Factory"><span class="toc-number">5.2.</span> <span class="toc-text">工厂模式(Factory)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-Observer"><span class="toc-number">5.3.</span> <span class="toc-text">观察者模式(Observer)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F-Decorator"><span class="toc-number">5.4.</span> <span class="toc-text">装饰器模式(Decorator)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F-Strategy"><span class="toc-number">5.5.</span> <span class="toc-text">策略模式(Strategy)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-Adapter"><span class="toc-number">5.6.</span> <span class="toc-text">适配器模式(Adapter)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E6%98%AF%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.</span> <span class="toc-text">渲染是十万条数据解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-Hooks-%E4%B8%8D%E8%83%BD%E5%AD%98%E5%9C%A8%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E4%B8%AD"><span class="toc-number">7.</span> <span class="toc-text">为什么 Hooks 不能存在条件判断中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6-%E6%B5%8F%E8%A7%88%E5%99%A8-%E5%92%8C-nodejs-%E7%8E%AF%E5%A2%83"><span class="toc-number">8.</span> <span class="toc-text">事件循环机制(浏览器 和 nodejs 环境)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSONP-%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8A%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.</span> <span class="toc-text">JSONP 原理以及实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%8D%E6%9D%82%E6%96%B9%E6%B3%95"><span class="toc-number">10.</span> <span class="toc-text">什么是简单方法什么是复杂方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC%E4%B8%AD%E7%9A%84form-data%E5%92%8Cjson%E7%9A%84%E5%BC%82%E5%90%8C"><span class="toc-number">11.</span> <span class="toc-text">表格中的form-data和json的异同</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">12.</span> <span class="toc-text">Cookie的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-%E4%B8%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">13.</span> <span class="toc-text">JavaScript 中的垃圾回收机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ESmodule-%E5%92%8C-CommonJS-%E7%9A%84%E5%B7%AE%E5%88%AB"><span class="toc-number">14.</span> <span class="toc-text">ESmodule 和 CommonJS 的差别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-%E7%9A%84%E6%96%B0%E5%A2%9E%E8%AF%AD%E6%B3%95"><span class="toc-number">15.</span> <span class="toc-text">ES6 的新增语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">16.</span> <span class="toc-text">原型和原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%86%92%E6%B3%A1%E5%92%8C%E5%A7%94%E6%89%98"><span class="toc-number">17.</span> <span class="toc-text">事件的冒泡和委托</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84-Debug"><span class="toc-number">18.</span> <span class="toc-text">浏览器的 Debug</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-%E9%93%BE%E4%B8%AD%E7%9A%84-catch-%E5%92%8C-try-catch-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">19.</span> <span class="toc-text">Promise 链中的 catch 和 try catch 的区别</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C"><span class="toc-number"></span> <span class="toc-text">计算机网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.</span> <span class="toc-text">常见状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E4%B8%AD%E5%B8%B8%E8%A7%81%E5%AD%97%E6%AE%B5"><span class="toc-number">2.</span> <span class="toc-text">HTTP 中常见字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET-%E5%92%8C-POST"><span class="toc-number">3.</span> <span class="toc-text">GET 和 POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF"><span class="toc-number">4.</span> <span class="toc-text">HTTP 缓存技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98-%E6%9D%83%E9%87%8D%E9%AB%98"><span class="toc-number">4.1.</span> <span class="toc-text">强制缓存(权重高)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"><span class="toc-number">4.2.</span> <span class="toc-text">协商缓存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E7%89%B9%E6%80%A7"><span class="toc-number">5.</span> <span class="toc-text">HTTP 特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP"><span class="toc-number">5.1.</span> <span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-1-1-%E6%80%A7%E8%83%BD"><span class="toc-number">5.2.</span> <span class="toc-text">HTTP&#x2F;1.1 性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTPS"><span class="toc-number">5.3.</span> <span class="toc-text">HTTPS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-2"><span class="toc-number">5.4.</span> <span class="toc-text">HTTP&#x2F;2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-3"><span class="toc-number">5.5.</span> <span class="toc-text">HTTP&#x2F;3</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E4%BC%98%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text">HTTP 优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RPC"><span class="toc-number">7.</span> <span class="toc-text">RPC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebSocket"><span class="toc-number">8.</span> <span class="toc-text">WebSocket</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E6%80%8E%E4%B9%88%E5%BB%BA%E7%AB%8B%E7%9A%84x%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.1.</span> <span class="toc-text">浏览器中怎么建立的x连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WebSocket%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">8.2.</span> <span class="toc-text">WebSocket使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP"><span class="toc-number">9.</span> <span class="toc-text">TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">TCP 的基本格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E7%89%B9%E7%82%B9"><span class="toc-number">9.2.</span> <span class="toc-text">TCP 特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E8%BF%9E%E6%8E%A5"><span class="toc-number">9.3.</span> <span class="toc-text">TCP 连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B"><span class="toc-number">9.4.</span> <span class="toc-text">TCP 建立连接过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">9.5.</span> <span class="toc-text">为什么需要三次握手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">9.6.</span> <span class="toc-text">TCP 断开连接的过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">9.7.</span> <span class="toc-text">为什么需要四次挥手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E5%8A%9F%E8%83%BD"><span class="toc-number">9.8.</span> <span class="toc-text">TCP 功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-%E5%B1%82"><span class="toc-number">10.</span> <span class="toc-text">IP 层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-number">10.1.</span> <span class="toc-text">IP地址分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%88%86%E7%B1%BB%E5%9C%B0%E5%9D%80-CIDR"><span class="toc-number">10.2.</span> <span class="toc-text">无分类地址 CIDR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%92%8C%E8%B7%AF%E7%94%B1%E6%8E%A7%E5%88%B6"><span class="toc-number">10.3.</span> <span class="toc-text">IP地址和路由控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E8%BE%93%E5%85%A5%E7%BD%91%E5%9D%80%E5%88%B0%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8F%91%E7%94%9F%E4%BA%86%E9%82%A3%E4%BA%9B%E8%BF%87%E7%A8%8B"><span class="toc-number">11.</span> <span class="toc-text">从输入网址到页面显示发生了那些过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">12.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-0-1-0-2-0-3"><span class="toc-number">13.</span> <span class="toc-text">为什么 0.1 + 0.2 !&#x3D;&#x3D; 0.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E6%98%AF%E6%80%8E%E4%B9%88%E5%AD%98%E5%82%A8%E7%9A%84"><span class="toc-number">14.</span> <span class="toc-text">浮点数在内存中是怎么存储的</span></a></li></ol></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/262c4a52.html" title="前端工程化配置，工程能力学习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1722687861605.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="前端工程化配置，工程能力学习"></a><div class="content"><a class="title" href="/posts/262c4a52.html" title="前端工程化配置，工程能力学习">前端工程化配置，工程能力学习</a><time datetime="2024-08-09T01:07:53.000Z" title="发表于 2024-08-09 01:07:53">2024-08-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f576a3fe.html" title="记录第一次字节实习offer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/8c52b9660688cedcc40580545cef9ba4.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="记录第一次字节实习offer"></a><div class="content"><a class="title" href="/posts/f576a3fe.html" title="记录第一次字节实习offer">记录第一次字节实习offer</a><time datetime="2024-07-26T22:56:41.000Z" title="发表于 2024-07-26 22:56:41">2024-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8f49bd54.html" title="前端技术探索"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/1719120534005.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="前端技术探索"></a><div class="content"><a class="title" href="/posts/8f49bd54.html" title="前端技术探索">前端技术探索</a><time datetime="2024-06-23T13:26:24.000Z" title="发表于 2024-06-23 13:26:24">2024-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ac8590ca.html" title="go 语言速成"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/postCover/5370198c46b7e6193aad423d755464fd5aa83820_raw.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="go 语言速成"></a><div class="content"><a class="title" href="/posts/ac8590ca.html" title="go 语言速成">go 语言速成</a><time datetime="2024-01-16T13:38:42.000Z" title="发表于 2024-01-16 13:38:42">2024-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9c0aba3e.html" title="leetcode 刷题(每日一题) 记录"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1301952160.cos.ap-shanghai.myqcloud.com/Apprehensive/wallpaper/1703262863447.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="leetcode 刷题(每日一题) 记录"></a><div class="content"><a class="title" href="/posts/9c0aba3e.html" title="leetcode 刷题(每日一题) 记录">leetcode 刷题(每日一题) 记录</a><time datetime="2023-12-27T10:47:16.000Z" title="发表于 2023-12-27 10:47:16">2023-12-27</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/yueyun.jpg" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/apprehen" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div class="copyright">&copy;2023 - 2024 By 月晕</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">14</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>留言</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/resume/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size:.9em"></i><span> 简历</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Clash/" style="font-size:.88rem">Clash<sup>1</sup></a><a href="/tags/Git/" style="font-size:.88rem">Git<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size:.88rem">JavaScript<sup>10</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>2</sup></a><a href="/tags/NestJS/" style="font-size:.88rem">NestJS<sup>1</sup></a><a href="/tags/Nginx/" style="font-size:.88rem">Nginx<sup>1</sup></a><a href="/tags/PM2/" style="font-size:.88rem">PM2<sup>1</sup></a><a href="/tags/Python/" style="font-size:.88rem">Python<sup>1</sup></a><a href="/tags/React/" style="font-size:.88rem">React<sup>4</sup></a><a href="/tags/React-Native/" style="font-size:.88rem">React Native<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size:.88rem">TypeScript<sup>2</sup></a><a href="/tags/Vite/" style="font-size:.88rem">Vite<sup>1</sup></a><a href="/tags/Vue/" style="font-size:.88rem">Vue<sup>2</sup></a><a href="/tags/go/" style="font-size:.88rem">go<sup>1</sup></a><a href="/tags/leetcode/" style="font-size:.88rem">leetcode<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size:.88rem">代理<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size:.88rem;font-weight:500;color:var(--anzhiyu-lighttext)">前端<sup>13</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/" style="font-size:.88rem">前端框架<sup>2</sup></a><a href="/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/" style="font-size:.88rem">反向代理<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size:.88rem">后端<sup>2</sup></a><a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size:.88rem">工程化<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7/" style="font-size:.88rem">打包工具<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:.88rem">数据结构<sup>2</sup></a><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/" style="font-size:.88rem">浏览器原理<sup>1</sup></a><a href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size:.88rem">源码分析<sup>2</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size:.88rem">爬虫<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem">算法<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size:.88rem">计算机<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size:.88rem;font-weight:500;color:var(--anzhiyu-lighttext)">计算机基础<sup>3</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:.88rem">计算机操作系统<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">计算机网络<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size:.88rem">面试<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size:.88rem">面试题<sup>1</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://chat.yueyun.site',
      region: 'ap-hangzhou',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://chat.yueyun.site',
      region: 'ap-hangzhou',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-W3DLGJMJDY', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/unitychan.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>